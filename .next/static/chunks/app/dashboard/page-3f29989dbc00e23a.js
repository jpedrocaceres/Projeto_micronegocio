(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{966:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(5155),r=s(2115),l=s(5695),i=s(5168),n=s(42),o=s(7387),d=s(351),c=s(8756);function m(){let e=(0,l.useRouter)(),[t,s]=(0,r.useState)("pt"),{theme:m}=(0,n.D)(),[x,h]=(0,r.useState)(null),[u,g]=(0,r.useState)([]),[p,v]=(0,r.useState)("user"),[b,f]=(0,r.useState)(!0),[j,w]=(0,r.useState)(null),N=async()=>{f(!0),w(null);try{let t=(0,i.U)(),{data:{user:s}}=await t.auth.getUser();if(!s)return void e.push("/login");let{data:a,error:r}=await t.from("user_profiles").select("*").eq("id",s.id).single();r?console.error("Error fetching user profile:",r):(h(a),v((null==a?void 0:a.role)||"user"));let l=t.from("appointments_with_details").select("*").order("appointment_date",{ascending:!0}).order("start_time",{ascending:!0});"admin"===p||(l=l.eq("user_id",s.id));let{data:n,error:o}=await l;o?(console.error("Error fetching appointments:",o),w("Error loading appointments")):g(n||[])}catch(e){console.error("Error fetching dashboard data:",e),w("Error loading dashboard data")}finally{f(!1)}};(0,r.useEffect)(()=>{N()},[]);let k={en:{dashboard:"Dashboard",home:"Home",appointments:"Appointments",profile:"Profile",services:"Services",welcome:"Welcome back!",quickActions:"Quick Actions",bookAppointment:"Book Appointment",viewProfile:"View Profile",manageServices:"Manage Services",recentActivity:"Recent Activity",noActivity:"No recent activity",overview:"Overview",totalAppointments:"Total Appointments",upcoming:"Upcoming",completed:"Completed",upcomingAppointments:"Upcoming Appointments",viewAll:"View All",noUpcoming:"No upcoming appointments",bookFirst:"Book your first appointment",accountSummary:"Account Summary",accountStatus:"Account Status",active:"Active",logout:"Logout",loading:"Loading...",errorLoading:"Error loading data",retry:"Retry",client:"Client",date:"Date",time:"Time",today:"Today",tomorrow:"Tomorrow",thisWeek:"This Week"},pt:{dashboard:"Painel",home:"In\xedcio",appointments:"Agendamentos",profile:"Perfil",services:"Servi\xe7os",welcome:"Bem-vindo!",quickActions:"A\xe7\xf5es R\xe1pidas",bookAppointment:"Agendar Consulta",viewProfile:"Ver Perfil",manageServices:"Gerenciar Servi\xe7os",recentActivity:"Atividade Recente",noActivity:"Nenhuma atividade recente",overview:"Vis\xe3o Geral",totalAppointments:"Total de Agendamentos",upcoming:"Pr\xf3ximos",completed:"Conclu\xeddos",upcomingAppointments:"Pr\xf3ximos Agendamentos",viewAll:"Ver Todos",noUpcoming:"Nenhum agendamento pr\xf3ximo",bookFirst:"Agende sua primeira consulta",accountSummary:"Resumo da Conta",accountStatus:"Status da Conta",active:"Ativo",logout:"Sair",loading:"Carregando...",errorLoading:"Erro ao carregar dados",retry:"Tentar novamente",client:"Cliente",date:"Data",time:"Hor\xe1rio",today:"Hoje",tomorrow:"Amanh\xe3",thisWeek:"Esta Semana"},es:{dashboard:"Panel",home:"Inicio",appointments:"Citas",profile:"Perfil",services:"Servicios",welcome:"\xa1Bienvenido de nuevo!",quickActions:"Acciones R\xe1pidas",bookAppointment:"Reservar Cita",viewProfile:"Ver Perfil",manageServices:"Gestionar Servicios",recentActivity:"Actividad Reciente",noActivity:"No hay actividad reciente",overview:"Resumen",totalAppointments:"Citas Totales",upcoming:"Pr\xf3ximas",completed:"Completadas",upcomingAppointments:"Pr\xf3ximas Citas",viewAll:"Ver Todas",noUpcoming:"No hay citas pr\xf3ximas",bookFirst:"Reserve su primera cita",accountSummary:"Resumen de Cuenta",accountStatus:"Estado de Cuenta",active:"Activo",logout:"Cerrar Sesi\xf3n",loading:"Cargando...",errorLoading:"Error al cargar datos",retry:"Reintentar",client:"Cliente",date:"Fecha",time:"Hora",today:"Hoy",tomorrow:"Ma\xf1ana",thisWeek:"Esta Semana"},fr:{dashboard:"Tableau de bord",home:"Accueil",appointments:"Rendez-vous",profile:"Profil",services:"Services",welcome:"Content de vous revoir!",quickActions:"Actions Rapides",bookAppointment:"Prendre Rendez-vous",viewProfile:"Voir le Profil",manageServices:"G\xe9rer les Services",recentActivity:"Activit\xe9 R\xe9cente",noActivity:"Aucune activit\xe9 r\xe9cente",overview:"Aper\xe7u",totalAppointments:"Total des Rendez-vous",upcoming:"\xc0 venir",completed:"Termin\xe9s",upcomingAppointments:"Rendez-vous \xe0 Venir",viewAll:"Voir Tout",noUpcoming:"Aucun rendez-vous \xe0 venir",bookFirst:"Prenez votre premier rendez-vous",accountSummary:"R\xe9sum\xe9 du Compte",accountStatus:"Statut du Compte",active:"Actif",logout:"D\xe9connexion",loading:"Chargement...",errorLoading:"Erreur lors du chargement des donn\xe9es",retry:"R\xe9essayer",client:"Client",date:"Date",time:"Heure",today:"Aujourd'hui",tomorrow:"Demain",thisWeek:"Cette Semaine"}}[t];(0,r.useEffect)(()=>{document.documentElement.lang=t},[t]);let y=async()=>{try{let t=(0,i.U)();await t.auth.signOut(),e.push("/login")}catch(e){console.error("Error signing out:",e)}};if(b)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-slate-100 dark:from-gray-900 dark:via-slate-800 dark:to-gray-900",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-slate-200 border-t-slate-600 rounded-full animate-spin mx-auto mb-6"}),(0,a.jsx)("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-blue-600 rounded-full animate-spin mx-auto",style:{animationDelay:"0.5s"}})]}),(0,a.jsx)("p",{className:"text-lg font-medium text-slate-700 dark:text-slate-300",children:k.loading})]})})});if(j)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-slate-100 dark:from-gray-900 dark:via-slate-800 dark:to-gray-900",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto px-6",children:[(0,a.jsxs)("div",{className:"relative mb-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:(0,a.jsx)(d.wIk,{className:"w-10 h-10 text-white"})}),(0,a.jsx)("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full animate-pulse"})]}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:k.errorLoading}),(0,a.jsxs)("button",{onClick:N,className:"inline-flex items-center px-6 py-3 bg-slate-700 hover:bg-slate-800 text-white font-medium rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,a.jsx)(d.TwU,{className:"w-5 h-5 mr-2"}),k.retry]})]})})});let A=(()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=u.length;return{total:s,upcoming:u.filter(e=>new Date(e.appointment_date)>=t&&"cancelled"!==e.status&&"completed"!==e.status).length,completed:u.filter(e=>"completed"===e.status).length}})(),S=(()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return u.filter(e=>new Date(e.appointment_date)>=t&&"cancelled"!==e.status&&"completed"!==e.status).slice(0,3)})();return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-slate-100 dark:from-gray-900 dark:via-slate-800 dark:to-gray-900",children:[(0,a.jsx)(o.sm,{language:t,onLanguageChange:s,onLogout:y,title:k.dashboard}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:py-8 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"text-center sm:text-left",children:(0,a.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-slate-900 dark:text-white",children:k.dashboard})}),(0,a.jsx)("div",{className:"block sm:hidden",children:(0,a.jsx)("div",{className:"bg-slate-700 rounded-2xl shadow-xl p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-lg",children:(0,a.jsx)(d.JXP,{className:"w-8 h-8 text-white"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:k.welcome}),(0,a.jsx)("p",{className:"text-slate-200",children:(null==x?void 0:x.full_name)||"User"})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 transform hover:scale-105 transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:k.totalAppointments}),(0,a.jsx)("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:A.total})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(d.wIk,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 transform hover:scale-105 transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:k.upcoming}),(0,a.jsx)("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:A.upcoming})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(d.ARf,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 transform hover:scale-105 transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:k.completed}),(0,a.jsx)("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:A.completed})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-slate-100 dark:bg-slate-700 rounded-xl flex items-center justify-center",children:(0,a.jsx)(d.TPq,{className:"w-6 h-6 text-slate-600 dark:text-slate-400"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsx)("div",{className:"bg-slate-700 rounded-2xl shadow-xl p-8 h-full text-white",children:(0,a.jsx)("div",{className:"flex flex-col h-full",children:(0,a.jsxs)("div",{className:"flex-shrink-0 mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-white/10 rounded-2xl flex items-center justify-center backdrop-blur-lg mb-4",children:(0,a.jsx)(d.JXP,{className:"w-8 h-8"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold mb-2",children:k.welcome}),(0,a.jsx)("p",{className:"text-slate-200 text-lg",children:(null==x?void 0:x.full_name)||"User"})]})})})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-8",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center",children:[(0,a.jsx)(d.est,{className:"w-6 h-6 mr-3 text-blue-600"}),k.quickActions]}),(0,a.jsxs)("div",{className:"grid gap-4 ".concat("admin"===p?"grid-cols-1 sm:grid-cols-3":"grid-cols-1 sm:grid-cols-2"),children:[(0,a.jsx)("button",{onClick:()=>e.push("/appointments"),className:"group bg-slate-700 hover:bg-slate-800 text-white rounded-xl p-6 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center mb-4 backdrop-blur-lg group-hover:bg-white/20 transition-all duration-300",children:(0,a.jsx)(d.wIk,{className:"w-6 h-6"})}),(0,a.jsx)("span",{className:"font-semibold",children:k.bookAppointment})]})}),(0,a.jsx)("button",{onClick:()=>e.push("/profile"),className:"group bg-slate-600 hover:bg-slate-700 text-white rounded-xl p-6 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center mb-4 backdrop-blur-lg group-hover:bg-white/20 transition-all duration-300",children:(0,a.jsx)(d.JXP,{className:"w-6 h-6"})}),(0,a.jsx)("span",{className:"font-semibold",children:k.viewProfile})]})}),"admin"===p&&(0,a.jsx)("button",{onClick:()=>e.push("/services"),className:"group bg-slate-500 hover:bg-slate-600 text-white rounded-xl p-6 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center mb-4 backdrop-blur-lg group-hover:bg-white/20 transition-all duration-300",children:(0,a.jsx)(d.est,{className:"w-6 h-6"})}),(0,a.jsx)("span",{className:"font-semibold",children:k.manageServices})]})})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-slate-700 p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold flex items-center",children:[(0,a.jsx)(d.wIk,{className:"w-5 h-5 mr-3"}),k.upcomingAppointments]}),(0,a.jsx)("button",{onClick:()=>e.push("/appointments"),className:"text-slate-200 hover:text-white font-medium transition-colors duration-200",children:k.viewAll})]})}),(0,a.jsx)("div",{className:"p-6",children:0===S.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(d.wIk,{className:"w-10 h-10 text-slate-400"})}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:k.noUpcoming}),(0,a.jsxs)("button",{onClick:()=>e.push("/appointments"),className:"inline-flex items-center px-6 py-3 bg-slate-700 hover:bg-slate-800 text-white font-medium rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,a.jsx)(d.GGD,{className:"w-4 h-4 mr-2"}),k.bookFirst]})]}):(0,a.jsx)("div",{className:"space-y-4",children:S.map((e,t)=>{var s,r;return(0,a.jsx)("div",{className:"group bg-slate-50 dark:bg-slate-700 rounded-xl p-4 hover:bg-slate-100 dark:hover:bg-slate-600 transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-slate-700 rounded-lg flex items-center justify-center text-white text-sm font-bold mr-3",children:t+1}),(0,a.jsx)("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.title})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-400",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Ohp,{className:"w-4 h-4 mr-2 text-blue-600"}),(0,a.jsxs)("span",{className:"font-medium",children:[(s=e.appointment_date)?(0,c.x)(s):""," \xe0s ",(r=e.start_time)?new Date("2000-01-01T".concat(r)).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):""]})]}),e.client_name&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.cfS,{className:"w-4 h-4 mr-2 text-slate-600"}),(0,a.jsx)("span",{children:e.client_name})]})]})]})})},e.id)})})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-slate-600 p-6 text-white",children:(0,a.jsxs)("h3",{className:"text-xl font-bold flex items-center",children:[(0,a.jsx)(d.TPq,{className:"w-5 h-5 mr-3"}),k.accountSummary]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between py-4 border-b border-slate-200 dark:border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-3",children:(0,a.jsx)(d.YrT,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,a.jsx)("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:k.accountStatus})]}),(0,a.jsx)("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:k.active})]})})})]})]})]})})]})}function x(){return(0,a.jsx)(m,{})}},6246:(e,t,s)=>{Promise.resolve().then(s.bind(s,966))}},e=>{e.O(0,[844,242,503,441,964,358],()=>e(e.s=6246)),_N_E=e.O()}]);